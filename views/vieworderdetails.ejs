<!doctype html>
<html lang="en">

<head>

	<!-- Basic Page Needs
================================================== -->
	<title>ShopZone</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!-- CSS
================================================== -->
	<link rel="stylesheet" type='text/css' href="/css/style.css">
	<link rel="stylesheet" type='text/css' href="/css/colors/orange.css">

</head>

<body>

	<!-- Wrapper -->
	<div id="wrapper">

		<%- include('../partials/header') %>

		<div class="clearfix"></div>
		<!-- Header Container / End -->
		<!-- Dashboard Container -->
		<div class="dashboard-container">






			<!-- Dashboard Content
	================================================== -->
	<div class="dashboard-content-container" data-simplebar>
		<div class="dashboard-content-inner">
	
			<!-- Dashboard Headline -->
			<div class="dashboard-headline">
				<h3>My Orders</h3>
				<!-- Breadcrumbs -->
				<nav id="breadcrumbs" class="dark">
					<ul>
						<li><a href="http://localhost:3000/index">Home</a></li>
						<li><a href="http://localhost:3000/index">Dashboard</a></li>
						<li>My Orders</li>
					</ul>
				</nav>
			</div>
	
			<!-- Row -->
			<div class="row">
				<!-- Dashboard Box -->
				<div class="col-xl-12">
					<div class="dashboard-box margin-top-0">
	
						<!-- Headline -->
						<div class="headline">
							<h3><i class="icon-material-outline-gavel"></i> Items List</h3>
						</div>
	
						<div class="content">
	
							<form id="updateCartForm" action="/updatecart" method="post">
	
								<ul class="dashboard-box-list">
									<% let cartTotal = 0; %>
									<% for (let i = 0; i < cartItems.length; i++) { %>
									<% const itemTotal = cartItems[i].price * cartItems[i].quantity; %>
									<% cartTotal += itemTotal; %>
									<li>
										<!-- Job Listing -->
										<div class="job-listing width-adjustment">
											<!-- Job Listing Details -->
											<div class="job-listing-details">
												<!-- Details -->
												<div class="job-listing-description">
													<h3 class="job-listing-title"><a href="#">
															<%= cartItems[i].product_name %>
														</a></h3>
												</div>
											</div>
										</div>
	
										<!-- Task Details -->
										<ul class="dashboard-task-info">
											<li>
												<strong>PKR <%= cartItems[i].price %></strong><span>Price Per piece</span>
											</li>
											<li>
												<!-- Quantity Buttons -->
												<strong><%= cartItems[i].quantity %></strong><span>Quantity</span>
											</li>
											<li>
												<strong>PKR <%= itemTotal %></strong><span>Item Total</span>
											</li>
											<li>
												<strong><%= cartItems[i].order_status %></strong><span>Order Status</span>
											</li>
											<li>
												<strong><%= cartItems[i].payment_choice %></strong><span>Payment Type</span>
											</li>
	
											<!-- Hidden input fields for cart item details -->
											<input type="hidden" name="cartItems[<%= i %>][cart_id]" value="<%= cartItems[i].cart_id %>">
											<input type="hidden" name="cartItems[<%= i %>][product_id]" value="<%= cartItems[i].product_id %>">
										</ul>
										<% if (cartItems[i].order_status === 'Shipped') { %>
										<div class="buttons-to-right always-visible">
											<a href="/receive-order/<%= cartItems[i].item_id %>" class="button ripple-effect">Receive Order</a>
										</div>
										<% } %>
									</li>
									<% } %>
								</ul>
	
								<!-- Display the Cart Total -->
								<div class="total-column">
									<strong>Cart Total: PKR <%= cartTotal %></strong>
								</div>
	
							</form>
	
						</div>
					</div>
				</div>
			</div>
	
		</div>
	</div>
	
			<!-- Dashboard Content / End -->

		</div>
		<!-- Dashboard Container / End -->
						<%- include('../partials/footer') %>



	</div>
	<!-- Wrapper / End -->



	<!-- Scripts
================================================== -->
	<script src="/js/jquery-3.3.1.min.js"></script>
	<script src="/js/jquery-migrate-3.0.0.min.js"></script>
	<script src="/js/mmenu.min.js"></script>
	<script src="/js/tippy.all.min.js"></script>
	<script src="/js/simplebar.min.js"></script>
	<script src="/js/bootstrap-slider.min.js"></script>
	<script src="/js/bootstrap-select.min.js"></script>
	<script src="/js/snackbar.js"></script>
	<script src="/js/clipboard.min.js"></script>
	<script src="/js/counterup.min.js"></script>
	<script src="/js/magnific-popup.min.js"></script>
	<script src="/js/slick.min.js"></script>
	<script src="/js/custom.js"></script>

	<!-- Snackbar // documentation: https://www.polonel.com/snackbar/ -->
	<script>
		// Snackbar for user status switcher
		$('#snackbar-user-status label').click(function () {
			Snackbar.show({
				text: 'Your status has been changed!',
				pos: 'bottom-center',
				showAction: false,
				actionText: "Dismiss",
				duration: 3000,
				textColor: '#fff',
				backgroundColor: '#383838'
			});
		}); 
	</script>

</body>

</html>